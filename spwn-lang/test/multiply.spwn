
let copy (source, dest1, dest2, callback) = { //ads first value to the two second values
    let add = {
        source.is(LARGER_THAN, 40, {
            source.add(-40)
            dest1.add(40)
            dest2.add(40)
            wait(0.02, add)
        })

        source.is(LARGER_THAN, 20, {
            source.add(-20)
            dest1.add(20)
            dest2.add(20)
            wait(0.02, add)
        })

        source.is(LARGER_THAN, 10, {
            source.add(-10)
            dest1.add(10)
            dest2.add(10)
            wait(0.02, add)
        })
        
        source.is(LARGER_THAN, 0, {
            source.add(-1)
            dest1.add(1)
            dest2.add(1)
            wait(0.02, add)
        })

        source.is(SMALLER_THAN, 1, callback)     
    }

    add!
}

let val1 = 10i
let val2 = 20i
let result = 30i

val1.add(50)
val2.add(34)

wait(1, {
    let tmp = ?i
    let trash = ?i
    
    let mult = {
        val2.is(LARGER_THAN, 0, {
            val2.add(-1)

            copy (val1, result, tmp, {
                copy (tmp, val1, trash, {
                    wait(0.02, mult)
                })
            })
            
        })
    }

    mult!
        
     
})